{"title":"æœ¬åœ° Docker æ­å»º Nginx åå‘ä»£ç† Nacos é›†ç¾¤","date":"2021-03-19T08:41:29.000Z","date_formatted":{"ll":"2021å¹´3æœˆ19æ—¥","L":"2021/03/19","MM-DD":"03-19"},"link":"2021/03/19/æœ¬åœ° Docker æ­å»º Nginx åå‘ä»£ç† Nacos é›†ç¾¤","comments":true,"tags":["Docker"],"updated":"2022-11-16T02:30:28.836Z","content":"<h1 id=\"æœ¬åœ°-docker-æ­å»º-nginx-åå‘ä»£ç†-nacos-é›†ç¾¤\">æœ¬åœ° Docker æ­å»º Nginx åå‘ä»£ç† Nacos é›†ç¾¤<a title=\"#æœ¬åœ°-docker-æ­å»º-nginx-åå‘ä»£ç†-nacos-é›†ç¾¤\" href=\"#æœ¬åœ°-docker-æ­å»º-nginx-åå‘ä»£ç†-nacos-é›†ç¾¤\"></a></h1>\n<blockquote>\n<p>Nginx ä»å…¥é—¨åˆ°å®è·µï¼Œä¸‡å­—è¯¦è§£ï¼ï¼š<a href=\"https://mp.weixin.qq.com/s/hafErlto-1N6ypYfOVIGBQ\">https://mp.weixin.qq.com/s/hafErlto-1N6ypYfOVIGBQ</a></p>\n</blockquote>\n<h3 id=\"æ­å»º-nacos-é›†ç¾¤\">æ­å»º Nacos é›†ç¾¤<a title=\"#æ­å»º-nacos-é›†ç¾¤\" href=\"#æ­å»º-nacos-é›†ç¾¤\"></a></h3>\n<blockquote>\n<p>å®˜ç½‘åœ°å€ï¼š<a href=\"https://nacos.io/zh-cn/docs/quick-start-docker.html\">https://nacos.io/zh-cn/docs/quick-start-docker.html</a></p>\n</blockquote>\n<ul>\n<li>\n<p>Clone é¡¹ç›®</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/nacos-group/nacos-docker.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> nacos-docker</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>æŸ¥çœ‹ç›®å½•ç»“æ„</p>\n<blockquote>\n<p>tree .</p>\n</blockquote>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ README.md</span><br><span class=\"line\">â”œâ”€â”€ README_ZH.md</span><br><span class=\"line\">â”œâ”€â”€ build\t\t\t\t\t\t\t\t <span class=\"comment\"># nacos é•œåƒåˆ¶åšçš„æºç  </span></span><br><span class=\"line\">â”‚   â”œâ”€â”€ Dockerfile</span><br><span class=\"line\">â”‚   â”œâ”€â”€ bin</span><br><span class=\"line\">â”‚   â”‚   â””â”€â”€ docker<span class=\"literal\">-startup</span>.sh</span><br><span class=\"line\">â”‚   â”œâ”€â”€ conf</span><br><span class=\"line\">â”‚   â”‚   â””â”€â”€ application.properties</span><br><span class=\"line\">â”‚   â””â”€â”€ init.d</span><br><span class=\"line\">â”‚       â””â”€â”€ custom.properties</span><br><span class=\"line\">â”œâ”€â”€ changlog</span><br><span class=\"line\">â”œâ”€â”€ env\t\t\t\t\t\t\t\t\t <span class=\"comment\"># docker compose ç¯å¢ƒå˜é‡ </span></span><br><span class=\"line\">â”‚   â”œâ”€â”€ mysql.env</span><br><span class=\"line\">â”‚   â”œâ”€â”€ nacos<span class=\"literal\">-embedded</span>.env</span><br><span class=\"line\">â”‚   â”œâ”€â”€ nacos<span class=\"literal\">-hostname</span>.env</span><br><span class=\"line\">â”‚   â”œâ”€â”€ nacos<span class=\"literal\">-ip</span>.env</span><br><span class=\"line\">â”‚   â””â”€â”€ nacos<span class=\"literal\">-standlone</span><span class=\"literal\">-mysql</span>.env</span><br><span class=\"line\">â””â”€â”€ example\t\t\t\t\t\t\t\t <span class=\"comment\"># docker compose ç¼–æ’æ–‡ä»¶</span></span><br><span class=\"line\">    â”œâ”€â”€ cluster<span class=\"literal\">-embedded</span>.yaml</span><br><span class=\"line\">    â”œâ”€â”€ cluster<span class=\"literal\">-hostname</span>.yaml</span><br><span class=\"line\">    â”œâ”€â”€ cluster<span class=\"literal\">-ip</span>.yaml</span><br><span class=\"line\">    â”œâ”€â”€ init.d</span><br><span class=\"line\">    â”‚   â””â”€â”€ custom.properties</span><br><span class=\"line\">    â”œâ”€â”€ prometheus</span><br><span class=\"line\">    â”‚   â”œâ”€â”€ prometheus<span class=\"literal\">-cluster</span>.yaml</span><br><span class=\"line\">    â”‚   â””â”€â”€ prometheus<span class=\"literal\">-standalone</span>.yaml\t\t</span><br><span class=\"line\">    â”œâ”€â”€ standalone<span class=\"literal\">-derby</span>.yaml</span><br><span class=\"line\">    â”œâ”€â”€ standalone<span class=\"literal\">-mysql</span><span class=\"literal\">-5</span>.<span class=\"number\">7</span>.yaml</span><br><span class=\"line\">    â””â”€â”€ standalone<span class=\"literal\">-mysql</span><span class=\"literal\">-8</span>.yaml</span><br><span class=\"line\">```- å•æœºæ¨¡å¼ Derby```</span><br><span class=\"line\">docker<span class=\"literal\">-compose</span> <span class=\"operator\">-f</span> example/standalone<span class=\"literal\">-derby</span>.yaml up</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>å•æœºæ¨¡å¼ MySQL</p>\n<p>å¦‚æœå¸Œæœ›ä½¿ç”¨ MySQL5.7</p>\n<p><code>docker-compose -f example/standalone-mysql-5.7.yaml up</code></p>\n<p>å¦‚æœå¸Œæœ›ä½¿ç”¨ MySQL8</p>\n<p><code>docker-compose -f example/standalone-mysql-8.yaml up</code></p>\n</li>\n<li>\n<p>é›†ç¾¤æ¨¡å¼</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker<span class=\"literal\">-compose</span> <span class=\"operator\">-f</span> example/cluster<span class=\"literal\">-hostname</span>.yaml up</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>è‹¥å¯åŠ¨åè¿æ¥ä¸ä¸Š mysql ï¼Œéœ€è¦å°†é…ç½®è‡ªåŠ¨ç”Ÿæˆçš„ volumes å·è½´æ–‡ä»¶å¤¹åˆ é™¤ï¼ˆvolumes: - ./mysql:/var/lib/mysqlï¼‰</p>\n</blockquote>\n<p>å¯åŠ¨ï¼š</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$</span>: docker run -<span class=\"literal\">-name</span> my<span class=\"literal\">-nginx</span> <span class=\"literal\">-p</span> <span class=\"number\">8888</span>:<span class=\"number\">80</span> <span class=\"literal\">-v</span> <span class=\"string\">&quot;<span class=\"variable\">$PWD</span>/html&quot;</span>:/user/share/nginx/html  <span class=\"literal\">-v</span> <span class=\"string\">&quot;<span class=\"variable\">$PWD</span>/conf&quot;</span>:/etc/nginx <span class=\"literal\">-d</span> nginx</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>PWDï¼šå½“å‰ç›®å½•</p>\n</blockquote>\n<p>è‡ªå®šä¹‰é…ç½® nginx.cong ä¸­çš„ server_name <a href=\"http://www.linlin.com\">www.linlin.com</a> é…ç½®åˆ° hosts ä¸­ 120.0.0.1 <a href=\"http://www.linlin.com\">www.linlin.com</a></p>\n<p>è®¿é—®æµè§ˆå™¨ï¼š<a href=\"http://www.linlin.com:8888/nacos\">www.linlin.com:8888/nacos</a></p>\n<blockquote>\n<p>é…ç½®å¥½ Nginx åå‘ä»£ç†åï¼Œè‹¥å‡ºç°æ— æ³•è®¿é—®ï¼Œåˆ—å‡ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>\n<ol>\n<li>404 æ£€æŸ¥è´Ÿè½½å‡è¡¡åˆ°å¯¹åº”çš„ç«¯å£æ²¡ï¼Œæˆ‘çš„æƒ…å†µæ˜¯ä» git æ‹‰ä¸‹æ¥çš„ Nacos é…ç½®ä»£ç é‡Œç«¯å£æ˜ å°„çš„æœ‰äº† â€œ9555:9555â€ ï¼Œä½† ngnix.conf é‡Œçš„ upstream ä¸­æ²¡æœ‰é…ç½®è¯¥ç«¯å£ï¼Œæ‰€ä»¥è´Ÿè½½å‡è¡¡åˆ° 9555 ç«¯å£å‡ºç° 404</li>\n<li>åœ¨é…ç½® hosts ä¹‹å‰æå‰è®¿é—®äº† <a href=\"http://www.linlin.com\">www.linlin.com</a> ï¼Œæ­¤æ—¶æœªèµ° 127.0.0.1 é¡µé¢å‡ºç° 462ï¼Œå†æ¬¡è®¿é—®æ—¶ä¼šèµ°æµè§ˆå™¨ç¼“å­˜ã€‚åå¤éƒ½ä¼šé¡µé¢ 462ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°é…ç½® server_name æˆ–è€…å¼ºåˆ¶æ¸…é™¤ç¼“å­˜</li>\n</ol>\n</blockquote>\n","prev":{"title":"vim-config","link":"2021/03/19/vim-config"},"next":{"title":"ç®—æ³•ä¸æ•°æ®ç»“æ„","link":"2021/03/19/ç®—æ³•ä¸æ•°æ®ç»“æ„"},"plink":"https://blog.liumulin.top/2021/03/19/æœ¬åœ° Docker æ­å»º Nginx åå‘ä»£ç† Nacos é›†ç¾¤/","toc":[{"id":"æœ¬åœ°-docker-æ­å»º-nginx-åå‘ä»£ç†-nacos-é›†ç¾¤","title":"æœ¬åœ° Docker æ­å»º Nginx åå‘ä»£ç† Nacos é›†ç¾¤","index":"1","children":[{"id":"æ­å»º-nacos-é›†ç¾¤","title":"æ­å»º Nacos é›†ç¾¤","index":"1.1"}]}],"reward":true,"copyright":{"custom":"ä¸è®¸è½¬è½½ğŸ˜¡ï¼ï¼ï¼"}}